From: Molly Chen <molly.chen@acme.test>
To: Backend Engineering Team <backend@acme.test>
Date: Tue, 10 Dec 2024 14:20:00 +0800
Subject: Re: Kafka retention confirmation

Thanks, this makes sense. I agree with the proposed Kafka retention and replay strategy. To summarize in writing, the email-ingest topic will retain messages for seven days, while the email-dedup topic will retain messages for thirty days. This balance allows us to keep storage usage under control while still supporting debugging, replay, and operational investigation when issues arise.

From an operational perspective, it is important to remember that replay assumes deterministic behavior. Given the same input data and configuration, the deduplication process should always produce the same output. This means configuration changes must be handled carefully and documented clearly before any replay is triggered. Otherwise, it becomes difficult to reason about differences between historical and newly produced results.

We should also be explicit about environment differences. Local development environments may use reduced retention values due to disk constraints, whereas shared or staging environments should reflect production-like settings as closely as possible. Monitoring should not only focus on throughput and latency, but also on consumer lag, disk usage, and error rates, since Kafka-related issues often surface indirectly.

Finally, please make sure that these decisions are captured in the README and configuration examples. Clear documentation will help future contributors understand why these values were chosen and reduce the likelihood of accidental misconfiguration.

Best regards, Molly

-----Original Message-----
From: Alice Tan <alice.tan@acme.test>
To: Backend Engineering Team <backend@acme.test>
Date: Tue, 10 Dec 2024 13:45:00 +0800
Subject: Kafka retention confirmation

Hi team, Just to confirm, are we aligned on seven days for email-ingest and thirty days for email-dedup?

Thanks, Alice